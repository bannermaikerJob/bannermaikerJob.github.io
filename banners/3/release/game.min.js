var __extends=(this&&this.__extends)||(function(){var a=Object.setPrototypeOf||({__proto__:[]} instanceof Array&&function(e,c){e.__proto__=c})||function(f,c){for(var e in c){if(c.hasOwnProperty(e)){f[e]=c[e]}}};return function(f,c){a(f,c);function e(){this.constructor=f}f.prototype=c===null?Object.create(c):(e.prototype=c.prototype,new e())}})();var mygame;(function(b){var a=(function(d){__extends(c,d);function c(){return d!==null&&d.apply(this,arguments)||this}c.prototype.preload=function(){this.preloadBarBackground=this.add.image(0,0,"preloaderBarEmpty");this.preloadBar=this.add.image(0,0,"preloaderBar");this.preloadBarBackground.alignIn(this.game.world.bounds,Phaser.CENTER);this.preloadBar.x=Math.floor(this.preloadBarBackground.x);this.preloadBar.y=Math.floor(this.preloadBarBackground.y);this.load.setPreloadSprite(this.preloadBar);this.icon=this.add.image(0,0,"connect");this.icon.anchor.set(0.5);this.icon.scale.x=-1;this.icon.x=this.preloadBarBackground.x+this.preloadBarBackground.width/2;this.icon.y=this.preloadBarBackground.y+this.preloadBarBackground.height+25;var e=this.game.time.events.loop(10,function(){this.icon.rotation+=0.1},this);var g=window.baseURL;this.game.load.image("icon2x",g+"assets/icon2x.png");this.game.load.image("table",g+"assets/newTableV3.png");this.game.load.image("bg",g+"assets/bg.jpg");this.game.load.atlas("objects",g+"assets/atlas_small.png",g+"assets/atlas_small.json");this.game.load.bitmapFont("font_all",g+"assets/font_all.png",g+"assets/font_all.fnt");this.game.load.bitmapFont("font_all_30",g+"assets/font_all_30.png",g+"assets/font_all_30.fnt");if(window.sounds){this.game.load.audio("win",g+"assets/sounds/win.mp3");this.game.load.audio("choose",g+"assets/sounds/choose.mp3");this.game.load.audio("chips_bet",g+"assets/sounds/chips_bet.mp3");this.game.load.audio("chips_move",g+"assets/sounds/chips_move.mp3");this.game.load.audio("click",g+"assets/sounds/click.mp3");this.game.load.audio("flop",g+"assets/sounds/flop.mp3");this.game.load.audio("new_card",g+"assets/sounds/new_card.mp3");this.game.load.audio("room",g+"assets/sounds/poker-room.mp3")}for(var f=1;f<=4;f++){this.game.load.image("t_000"+f,g+"assets/t_000"+f+".png")}};c.prototype.create=function(){this.game.state.start("PlayState")};c.prototype.ChangeSize=function(){};return c}(Phaser.State));b.Preloader=a})(mygame||(mygame={}));var mygame;(function(d){var b="1.0.0";var e;(function(j){j[j.IDLE=0]="IDLE";j[j.EXECUTE=1]="EXECUTE"})(e=d.STATES||(d.STATES={}));var h=(function(j){__extends(k,j);function k(){var l=j.call(this,true)||this;l._standEnabled=!window.tutorial;l._currentTutorialHint=0;d.GameConfig.rnd=new d.MersenneTwister();l._chips=[];l._chipsOnTable=[];l._tempElemts=[];l._chipBacks=[];return l}k.prototype.create=function(){var q=this;this._openFinishScreen=false;this.game.time.advancedTiming=true;if(window.sounds){this.game.sound.play("room",window.backSoundVal,true)}this.game.stage.smoothed=true;this._background=new d.OSprite(d.Core.centerX,d.Core.centerY).otherXY(d.Core.centerY,d.Core.centerX).end();var p=new d.BackGround(this.game,0,0);this._background.addChild(p);this.game.world.addChild(this._background);var u=150;if(this.game.device.iPad){u=100}this._tableOSprite=new d.OSprite(d.Core.centerX,d.Core.centerY-u).myScale(1.156).otherXY(d.Core.centerY,d.Core.centerX-100).end();this.game.world.addChild(this._tableOSprite);this.initButtons();this._tableContainer=new d.OSprite(d.Core.centerX,d.Core.centerY).myScale(1.1).otherXY(d.Core.centerY,d.Core.centerX-35).otherScale(1.07).end();if(this.game.device.iPad){this._tableContainer.myScale(1.2).otherScale(1.3).end()}this.game.world.addChild(this._tableContainer);var w=this.game.add.sprite(0,-170,"table");w.anchor.set(1,0.5);w.scale.set(2,2);this._tableOSprite.addChild(w);var m=this.game.add.sprite(0,-170,"table");m.anchor.set(1,0.5);m.scale.set(-2,2);this._tableOSprite.addChild(m);this.game.world.addChild(this._tableContainer);this._dealer=new d.Dealer(this.game);this._dealer.nextCommandCallback=function(){};this._dealer.checkWinLoseCallback=function(){q.checkWinLose()};this._graphics=this.game.add.graphics(0,0);this._tableContainer.addChild(this._graphics);this._graphics.alpha=0;this._bmtTotalBid=this.game.add.bitmapText(0,0,"font_all_30","$ 10",24);this._bmtTotalBid.anchor.set(0,0.5);this._bmtTotalBid.alpha=0;this._tableContainer.addChild(this._bmtTotalBid);this.initBots();if(this.game.device.iPad){this._safe=new d.OSprite(150+20,530+50,"objects","830.png").myScale(0.75).otherXY(150,980+50).end()}else{this._safe=new d.OSprite(150+20,450+50,"objects","830.png").myScale(0.75).otherXY(150+40,980+40).end()}this.game.world.addChild(this._safe);var v=this.game.add.bitmapText(0,125,"font_all",d.Lang.Instance.GRENN_BUTTON_TEXT[window.lang],48);v.anchor.set(0.5);this._safe.addChild(v);if(this.game.device.iPad){this._greenButton=new d.OSprite(150+20,650+10+30).otherXY(150,1180+50).end()}else{this._greenButton=new d.OSprite(150+20,650+10).otherXY(150+40,1180+40).end()}var l=this.game.make.sprite(0,0,"objects","119.png");l.anchor.set(0.5);this._greenButton.addChild(l);var x=this.game.add.bitmapText(0,0,"font_all",d.Lang.Instance.INSTALL_AND_PLAY[window.lang],32);x.anchor.set(0.5);this._greenButton.addChild(x);var t=new FxSplash(this.game,l.width-10,l.height-10,10);this._greenButton.addChild(t);t.x+=5-125;t.y+=3-38;t.playLoop();l.inputEnabled=true;l.events.onInputDown.add(function(){l.loadTexture("objects","114.png")});l.events.onInputUp.add(function(){l.loadTexture("objects","119.png");window.trackClick()});this.game.add.tween(this._greenButton.scale).to({x:1.1,y:1.1},1000,Phaser.Easing.Sinusoidal.InOut,true,0,-1,true);this.createLogo();this.initChips();if(window.tutorial){this._overlayGraphics=this.game.add.graphics(0,0);this._overlayGraphics.beginFill(0,0.5);this._overlayGraphics.drawRect(-2360/2,-2360/2,2360,2560);this._overlayGraphics.endFill();this._tableOSprite.addChild(this._overlayGraphics);this._tutorial=new d.OSprite(250,d.Core.centerY-50).otherXY(d.Core.centerY,200).end();this._hint=this.game.add.bitmapText(0,-70,"font_all",d.Lang.Instance.TUTORIAL_STEP_1[window.lang],48);this._hint.anchor.set(0.5);this._hint.align="center";this._hint.maxWidth=450;this._tutorial.addChild(this._hint);this._pointer=this.game.add.sprite(40,-60,"objects","pointer.png");this._pointer.anchor.set(0.2,0);this._tableOSprite.addChild(this._pointer);this._pointerTween=this.game.add.tween(this._pointer).to({y:10},500,Phaser.Easing.Sinusoidal.InOut,true,0,-1,true);this._timerInstall=0;window.gameStarted();this.game.time.events.loop(Phaser.Timer.SECOND,this.tick,this);this._leftButton.inputEnabled=false;this._rightButton.inputEnabled=false;this._leftButton.parent.alpha=0;this._rightButton.parent.alpha=0}this._balance=this.game.add.sprite(10,300-70-70);var n=this.game.add.sprite(-10,0,"objects","bank2.png");this._balance.addChild(n);n.anchor.set(0.5);var r=this.game.add.bitmapText(10,0,"font_all_30",d.Lang.Instance.BALANCE[window.lang].toUpperCase(),30);r.anchor.set(1,0.5);var s=this.game.add.bitmapText(10,0,"font_all_30",this._player.balance.toString());s.anchor.set(0,0.5);this._balance.data.text=s;this._balance.data.initialWidth=this._balance.width;this._balance.data.balanceWord=r;var o=Math.max(this._balance.width,r.width+s.width+60);n.scale.set(1.3,1);this._balance.addChild(r);this._balance.addChild(s);this._tableOSprite.addChild(this._balance);if(window.tutorial){this._tableOSprite.setChildIndex(this._overlayGraphics,this._tableOSprite.children.length-1);this._tableOSprite.setChildIndex(this._chips[2],this._tableOSprite.children.length-1);this._tableOSprite.setChildIndex(this._pointer,this._tableOSprite.children.length-1)}this._chipstFallEmitter=this.game.add.emitter(0,0,200);this._chipstFallEmitter.makeParticles("objects",["red@2x.png","orange@2x.png","green@2x.png","blue@2x.png"]);this._chipstFallEmitter.gravity=900*2+50;this._chipstFallEmitter.minParticleSpeed.setTo(-500,-2000);this._chipstFallEmitter.maxParticleSpeed.setTo(500,-2100);this._chipstFallEmitter.setAlpha(1,0,1350,Phaser.Easing.Sinusoidal.InOut);this._tableContainer.addChild(this._chipstFallEmitter);this._fireworksOverlay=this.game.add.graphics(0,0);this._fireworksOverlay.visible=false;this._fireworksOverlay.beginFill(0,0.5).drawRect(-2600/2,-2600/2,2600,2600).endFill();this._tableContainer.addChild(this._fireworksOverlay);this._chipstFallEmitter.emitX=0,this._chipstFallEmitter.emitY=d.Core.centerY+1100;this._winMessage=this.game.add.bitmapText(0,0,"font_all","",90);this._winMessage.anchor.set(0.5);this._winMessage.tint=13938487;this._winMessage.visible=false;this._tableContainer.addChild(this._winMessage);this.drawChips()};k.prototype.drawChips=function(){this._chipBacks.forEach(function(r){return r.destroy()});this._chipBacks.length=0;var u=this._player.balance;var m=this.findChips(u);var t=m.reduce(function(r,x){return r+x});var l=260;var n=29;var w=18;for(var o=0;o<m.length;o++){for(var p=n;p>n-m[o];p--){var q=5*p/4.5/180*Math.PI+Math.PI/2;var v=480*Math.cos(q);var s=260*Math.sin(q);var z=this.game.add.sprite(v,s,"t_000"+(o+1));z.scale.set(0.6);z.anchor.set(0.5);z.angle=w;w-=0.65;this._chipBacks.push(z);this._tableOSprite.addChild(z)}n-=m[o];if(n<-29){break}}};k.prototype.findChips=function(o){var n=window.chipPrices.slice(0);var l=[];for(var m=0;m<n.length;m++){l[m]=Math.floor(o/n[m]);o-=l[m]*n[m]}return l};k.prototype.tick=function(){this._timerInstall++;window.playTime=this._timerInstall};k.prototype.createLogo=function(){if(this.game.device.iPad){this._UILogo=new d.OSprite(162+60,31);this._UILogo.otherXY(d.Core.centerY,31).end()}else{this._UILogo=new d.OSprite(162+60,31);this._UILogo.otherXY(d.Core.centerY,31).end()}var m=this.game.add.sprite(0,0,"objects","logo_main.png");m.anchor.set(0.5,0);this._UILogo.addChild(m);var l=new FxSplash(this.game,m.width+10,m.height,0);m.addChild(l);l.x-=m.width/2-2;l.playLoop(1000,2000);if(window.tutorial){this._UILogo.alpha=0.5;this._UILogo.otherVisible(false).end()}};k.prototype.onLandscape=function(){if(this._hint&&this.game.device.iPad){this._hint.maxWidth=450}if(this._chipstFallEmitter){this._chipstFallEmitter.emitY=d.Core.centerY+500}};k.prototype.onPortret=function(){if(this._hint&&this.game.device.iPad){switch(this._hint.text){case d.Lang.Instance.TUTORIAL_STEP_3[window.lang]:case d.Lang.Instance.TUTORIAL_STEP_4[window.lang]:this._hint.maxWidth=850;break;default:this._hint.maxWidth=450;break}}if(this._chipstFallEmitter){this._chipstFallEmitter.emitY=d.Core.centerX+200}};k.prototype.hideTutorial=function(){this._overlayGraphics.visible=false;this._hint.visible=false;if(this._pointerTween){this._pointerTween.stop()}this._pointer.visible=false};k.prototype.initChips=function(){var m=this;this._totalBid=new d.CardCounter(this.game,0,80-90);this._totalBid.setRectangleSize(65,40,7,0.6);this._totalBid.setFontSize(30);this._totalBid.visible=false;this._tableOSprite.addChild(this._totalBid);var l=["red@2x.png","orange@2x.png","green@2x.png","blue@2x.png",];l.forEach(function(o,q){var n=m.game.add.sprite(-150+15+90*q,190-110,"objects",o);n.width=85;n.height=85;m._chips.push(n);n.data={price:window.chipPrices[q]};var p=new d.CardCounter(m.game,0,-5);p.setRectangleSize(65,40,7,0.6);p.setFontSize(30);p.addNumber(window.chipPrices[q]);n.addChild(p);n.anchor.set(0.5);n.inputEnabled=true;n.events.onInputUp.add(function(){m.game.sound.play("chips_bet",0.4);if(m._leftButton.alpha<1){m._leftButton.alpha=1;m._rightButton.alpha=1;m._leftButton.inputEnabled=true;m._rightButton.inputEnabled=true}if(window.tutorial&&m._hint.text==d.Lang.Instance.TUTORIAL_STEP_6[window.lang]){window.tutorial=false;m._hint.visible=false;if(window.endGameTimer>=0){m.game.time.events.add(window.endGameTimer,function(){m.openFinishScreen();if(window.sounds){m.game.sound.play("win",1)}},m)}}if(q!=2&&window.tutorial){return}if(!m._totalBid.visible){m._totalBid.visible=true}var r=m.game.add.sprite(n.x,n.y,"objects",o);m._chipsOnTable.push(r);r.width=85;r.height=85;r.anchor.set(0.5);r.data.id=q;m._player.bid(window.chipPrices[q]);m._totalBid.addNumber(window.chipPrices[q]);m.toggleChips();m.updateBalanceText();m._tableOSprite.addChild(r);var s=Math.min(m._player.numberOfChips,6);m.game.add.tween(r).to({x:0,y:27-s*10-90},500,Phaser.Easing.Quadratic.Out,true);if(q==2&&window.tutorial){n.inputEnabled=false;m._overlayGraphics.visible=false;m._pointer.visible=false;m._hint.visible=false;m._pointerTween.stop();m._rightButton.parent.alpha=1;m.game.add.tween(m._leftButton.parent).to({alpha:1},500,Phaser.Easing.Quadratic.In,true).onComplete.addOnce(function(){m._leftButton.inputEnabled=true;m._overlayGraphics.visible=true;m._rightButton.parent.alpha=0.5;m._hint.text=d.Lang.Instance.TUTORIAL_STEP_2[window.lang];m._hint.visible=true;m._tableOSprite.removeChild(m._pointer);m._leftButton.addChild(m._pointer);m._pointer.position.set(0,-90);m._pointer.visible=true;m._pointerTween=m.game.add.tween(m._pointer).to({y:-130},500,Phaser.Easing.Sinusoidal.InOut,true,0,-1,true);m.setChildIndexTutorial()},m);m.game.add.tween(m._rightButton.parent).to({alpha:0.5},500,Phaser.Easing.Quadratic.In,true)}},m);m._tableOSprite.addChild(n)})};k.prototype.setChildIndexTutorial=function(){this._tableOSprite.setChildIndex(this._overlayGraphics,this._tableOSprite.children.length-1)};k.prototype.updateBalanceText=function(){var l=this;this.game.add.tween(this._balance.data.text).to({alpha:0},200,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){l._balance.data.text.text=l._player.balance.toString();l.game.add.tween(l._balance.data.text).to({alpha:1},200,Phaser.Easing.Sinusoidal.InOut,true)},this)};k.prototype.initButtons=function(){var n=this;var m=650+10;var l=1180+40;if(this.game.device.iPad){m=650+10+30;l=1180+50}this._leftButton=this.addButton(d.Core.centerX-150,m,d.Core.centerY+200,l-100,d.Lang.Instance.PLAY[window.lang]);this._rightButton=this.addButton(d.Core.centerX+150,m,d.Core.centerY+200,l,d.Lang.Instance.RESET[window.lang]);this._leftButton.inputEnabled=true;this._leftButton.events.onInputDown.add(function(){if(n._player.numberOfChips>0){if(n._leftButton.data.bitmapText.text==d.Lang.Instance.PLAY[window.lang]){if(window.tutorial){n.hideTutorial()}n.game.sound.play("chips_bet",0.4);n._chipsOnTable.forEach(function(o){n.game.add.tween(o).to({x:300-30,y:o.y+20},500,Phaser.Easing.Sinusoidal.InOut,true)});n.game.add.tween(n._totalBid).to({x:n._totalBid.x+300-30,y:n._totalBid.y+20},500,Phaser.Easing.Sinusoidal.InOut,true);n._chips.forEach(function(o){n.game.add.tween(o).to({y:900},500,Phaser.Easing.Sinusoidal.InOut,true)});n.game.add.tween(n._balance).to({y:900},500,Phaser.Easing.Sinusoidal.InOut,true);n._dealer.giveCardTo(n._player);n._leftButton.inputEnabled=false;n._rightButton.inputEnabled=false;n._leftButton.alpha=0.5;n._rightButton.alpha=0.5;n._dealer.addCardOnTanle(n._tableContainer);n.game.time.events.add(300,function(){n._dealer.giveCardTo(n._player).onComplete.addOnce(function(){if(n._player.points>=21){n._dealer.revealLastCard();n.checkWinLose()}else{n._leftButton.alpha=1;n._rightButton.alpha=1;n._leftButton.inputEnabled=true;if(window.tutorial){n._rightButton.inputEnabled=false;n._hint.text=d.Lang.Instance.TUTORIAL_STEP_3[window.lang];if(!d.Core.isLandscape){if(n.game.device.iPad){n._hint.maxWidth=800;n._hint.y-=20}else{n._hint.maxWidth=450}}n._overlayGraphics.visible=true;n._hint.visible=true;n._pointer.position.set(0,-90);n._pointer.visible=true;n._pointerTween=n.game.add.tween(n._pointer).to({y:-130},500,Phaser.Easing.Sinusoidal.InOut,true,0,-1,true)}else{n._rightButton.inputEnabled=true}}},n);n._dealer.addCardOnTanle(n._tableContainer)},n);n._leftButton.data.bitmapText.text=d.Lang.Instance.HIT[window.lang];n._rightButton.data.bitmapText.text=d.Lang.Instance.STAND[window.lang]}else{if(n._leftButton.data.bitmapText.text==d.Lang.Instance.HIT[window.lang]&&n._player.points<21){if(window.tutorial){n.hideTutorial();n._leftButton.inputEnabled=false;n._rightButton.inputEnabled=true;n._hint.text=d.Lang.Instance.TUTORIAL_STEP_4[window.lang];if(d.Core.isLandscape){n._hint.maxWidth=450}else{if(n.game.device.iPad){n._hint.maxWidth=850}}n._leftButton.removeChild(n._pointer);n.game.add.tween(n._leftButton.parent).to({alpha:0.5},500,Phaser.Easing.Sinusoidal.InOut,true);n._rightButton.parent.alpha=1;n._rightButton.addChild(n._pointer);n._overlayGraphics.visible=true;n._hint.visible=true;n._pointer.visible=true;n._pointer.position.set(0,-90);n._pointerTween=n.game.add.tween(n._pointer).to({y:-130},500,Phaser.Easing.Sinusoidal.InOut,true,0,-1,true)}n._leftButton.inputEnabled=false;n._rightButton.inputEnabled=false;n._dealer.giveCardTo(n._player).onComplete.addOnce(function(){if(n._player.points>=21){n._leftButton.alpha=0.5;n._rightButton.alpha=0.5;n._dealer.revealLastCard();n.checkWinLose()}else{if(window.tutorial){n._leftButton.inputEnabled=false}else{n._leftButton.inputEnabled=true}n._rightButton.inputEnabled=true}})}}}},this);this._rightButton.inputEnabled=true;this._rightButton.events.onInputDown.add(function(){if(n._rightButton.data.bitmapText.text==d.Lang.Instance.RESET[window.lang]){if(n._chipsOnTable.length>0){var p=n._chipsOnTable.length;var o=function(t){var s=void 0;var u=n._chipsOnTable[t];var r=n._chips[u.data.id].x;var v=n._chips[u.data.id].y;s=n.game.add.tween(u).to({x:r,y:v},400,Phaser.Easing.Quadratic.In,true,100*(n._chipsOnTable.length-t-1));s.onStart.addOnce(function(){n.game.sound.play("chips_bet",0.4)},n);s.onComplete.addOnce(function(){u.destroy()},n)};for(var q=0;q<n._chipsOnTable.length;q++){o(q)}n.game.time.events.add(400+100*(n._chipsOnTable.length-1),function(){n._chipsOnTable.splice(0,p);n.toggleChips()},n);n.game.add.tween(n._leftButton).to({alpha:0.5},0.5,Phaser.Easing.Sinusoidal.InOut,true);n.game.add.tween(n._rightButton).to({alpha:0.5},0.5,Phaser.Easing.Sinusoidal.InOut,true);n.game.add.tween(n._totalBid).to({alpha:0},400,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){n._totalBid.visible=false;n._player.balance+=n._totalBid.amount;n._player.resetBid();n._totalBid.alpha=1;n._totalBid.myreset();n._player.numberOfChips=0;n.updateBalanceText()},n)}}else{if(n._rightButton.data.bitmapText.text==d.Lang.Instance.STAND[window.lang]){if(window.tutorial){n.hideTutorial();n._leftButton.parent.alpha=1}n._dealer.revealLastCard();n._rightButton.inputEnabled=false;n._leftButton.inputEnabled=false;n._leftButton.alpha=0.5;n._rightButton.alpha=0.5;if(n._dealer.points<17){n.game.time.events.add(500,function(){n._dealer.toMaxCards(n._tableContainer)},n)}else{n.checkWinLose()}}}},this)};k.prototype.myreset=function(){this._dealer.myreset();this._player.myreset();this._chipsOnTable.length=0;if(window.tutorial){this._chips.forEach(function(l){return l.inputEnabled=true})}this._tempElemts.length=0};k.prototype.checkWinLose=function(){var m=this;if((this._dealer.points<=this._player.points&&this._player.points<=21)||this._dealer.points>21){this._player.makeCounterGreen()}else{this._dealer.makeCounterGreen()}var l=1000;if(window.tutorial){this._overlayGraphics.visible=true;this._hint.text=d.Lang.Instance.TUTORIAL_STEP_5[window.lang];this._hint.visible=true;l=2000}this.game.time.events.add(l,function(){m.checkWinLose2();if(window.tutorial){m._overlayGraphics.visible=false;m._UILogo.otherVisible(true).end();m._UILogo.alpha=1;m._hint.visible=false}},this)};k.prototype.checkWinLose2=function(){var m=this;this._leftButton.inputEnabled=false;this._rightButton.inputEnabled=false;if((this._dealer.points<=this._player.points&&this._player.points<=21)||this._dealer.points>21){this._dealer.removeCards();var l=this._player.points;this._player.balance+=this._player.currentBid*2;this._player.removeCards().onComplete.addOnce(function(){var n;m.game.add.tween(m._totalBid).to({alpha:0},400,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){m._totalBid.visible=false;m._totalBid.alpha=1;m._totalBid.myreset()},m);m._chipsOnTable.forEach(function(p,o){var r=m._chips[p.data.id].y;n=m.game.add.tween(p).to({x:0,y:r},400,Phaser.Easing.Quadratic.In,true,100*(m._chipsOnTable.length-o-1));n.onStart.addOnce(function(){m.game.sound.play("chips_bet",0.4)},m);n.onComplete.addOnce(function(){p.destroy()},m);var q=m.game.add.sprite(d.Core.width/2,-50,"objects",p.frameName);m.game.world.addChild(q);q.anchor.set(0.5);m._tempElemts.push(q);n=m.game.add.tween(q).to({y:d.Core.height+100},400,Phaser.Easing.Quadratic.In,true,100*(m._chipsOnTable.length-o-1));n.onComplete.addOnce(function(){q.destroy()})});n.onComplete.addOnce(function(){if(d.Core.isLandscape){m._chipstFallEmitter.emitY=d.Core.centerY+500}else{m._chipstFallEmitter.emitY=d.Core.centerX+200}m.game.world.setChildIndex(m._tableContainer,m.game.world.children.length-1);m._tableContainer.setChildIndex(m._fireworksOverlay,m._tableContainer.children.length-1);m._tableContainer.setChildIndex(m._chipstFallEmitter,m._tableContainer.children.length-1);m._tableContainer.setChildIndex(m._winMessage,m._tableContainer.children.length-1);m._fireworksOverlay.visible=true;for(var o=0;o<5;o++){m.game.time.events.add(300*o,function(){m.game.sound.play("chips_move",0.4)},m)}m._chipstFallEmitter.start(false,1500,50,30);m._winMessage.visible=true;m._winMessageTween=m.game.add.tween(m._winMessage.scale).to({x:1.3,y:1.3},500,Phaser.Easing.Back.Out,true,0,-1,true);if(l==21){m._winMessage.text=d.Lang.Instance.BLACKJACK[window.lang]+"\n+$"+(m._player.currentBid*2).toString();m._winMessage.align="center"}else{m._winMessage.text="+$"+(m._player.currentBid*2).toString()}m.game.time.events.add(2000,function(){m._fireworksOverlay.visible=false;m._winMessage.visible=false;m._winMessageTween.stop();m._winMessage.scale.set(1,1);m.yetAnotherReset()},m)})},this)}else{this._dealer.removeCards();this._player.removeCards().onComplete.addOnce(function(){var n;m.game.add.tween(m._totalBid).to({alpha:0},400,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){m._totalBid.visible=false;m._totalBid.alpha=1;m._totalBid.myreset()},m);m._chipsOnTable.forEach(function(p,o){n=m.game.add.tween(p).to({x:0,y:-800},400,Phaser.Easing.Quadratic.In,true,100*(m._chipsOnTable.length-o-1));n.onStart.addOnce(function(){m.game.sound.play("chips_bet",0.4)},m);n.onComplete.addOnce(function(){p.destroy()},m)});n.onComplete.addOnce(function(){if(m._player.balance<=0){m.game.time.events.add(750,function(){m.openFinishScreen()},m)}else{m.yetAnotherReset()}},m)},this)}};k.prototype.yetAnotherReset=function(){var l=this;if(window.tutorial){this._hint.text=d.Lang.Instance.TUTORIAL_STEP_6[window.lang];this._hint.visible=true;this._tutorial.otherXY(d.Core.centerY,400-50).end()}this._balance.data.text.text=this._player.balance.toString();this.showChip();this._balance.scale.set(0.1);this.game.add.tween(this._balance.scale).to({x:1,y:1},500,Phaser.Easing.Back.Out,true,150);this.game.add.tween(this._balance).to({x:10,y:250-20-70},400,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){l._totalBid.position.set(0,80-90);l._totalBid.visible=false;l.myreset()});this.game.add.tween(this._leftButton.data.bitmapText).to({alpha:0},250,Phaser.Easing.Sinusoidal.Out,true).onComplete.addOnce(function(){l._leftButton.data.bitmapText.text=d.Lang.Instance.PLAY[window.lang];l.game.add.tween(l._leftButton.data.bitmapText).to({alpha:0},250,Phaser.Easing.Sinusoidal.In,true);l._leftButton.inputEnabled=true},this);this.resetButton(this._leftButton,d.Lang.Instance.PLAY[window.lang]);this.resetButton(this._rightButton,d.Lang.Instance.RESET[window.lang])};k.prototype.resetButton=function(l,m){var n=this;this.game.add.tween(l.data.bitmapText).to({alpha:0},250,Phaser.Easing.Sinusoidal.Out,true).onComplete.addOnce(function(){l.data.bitmapText.text=m;n.game.add.tween(l.data.bitmapText).to({alpha:1},250,Phaser.Easing.Sinusoidal.In,true);l.inputEnabled=true},this)};k.prototype.showChip=function(){var l=this;this._chips.forEach(function(m){var n=m.scale.x;m.scale.set(0.1);l.game.add.tween(m.scale).to({x:n,y:n},500,Phaser.Easing.Back.InOut,true,150).onComplete.addOnce(function(){},l);l.game.add.tween(m).to({y:170-20-70},400,Phaser.Easing.Quadratic.In,true)});this.toggleChips()};k.prototype.toggleChips=function(){var l=this;this._chips.forEach(function(m){if(m.data.price>l._player.balance){m.inputEnabled=false;m.alpha=0.6}else{m.alpha=1;m.inputEnabled=true}});this.drawChips()};k.prototype.addButton=function(r,q,m,l,t){var o=this;var s=new d.OSprite(r,q).otherXY(m,l).end();var n=this.game.add.sprite(0,0,"objects","70.png");n.anchor.set(0.5);s.addChild(n);var p=this.game.add.bitmapText(0,0,"font_all",t,32);p.anchor.set(0.5);s.addChild(p);n.data.bitmapText=p;n.events.onInputDown.add(function(){if(n.alpha==1){o.game.sound.play("click",1);n.loadTexture("objects","73.png")}});n.events.onInputUp.add(function(){if(n.alpha==1){n.loadTexture("objects","70.png")}});n.alpha=0.5;this.game.world.addChild(s);return n};k.prototype.initBots=function(){var l=this;this._player=new d.Player(this.game,0,0,window.playerStartBalance);if(!window.tutorial){if(window.endGameTimer>=0){this.game.time.events.add(window.endGameTimer,function(){l.openFinishScreen();if(window.sounds){l.game.sound.play("win",1)}},this)}}this._dealer.addBot(this._player);this._tableContainer.addChild(this._player)};k.prototype.openFinishScreen=function(){if(this._openFinishScreen){return}this._openFinishScreen=true;if(this._tempElemts.length>0){this._tempElemts.forEach(function(r){return r.alpha=0})}this._tableOSprite.alpha=0;this._tableContainer.alpha=0;this.game.tweens.removeAll();this._tableContainer.visible=false;this._player.visible=false;this._leftButton.parent.alpha=0;this._rightButton.parent.alpha=0;this._graphics.alpha=0;this._bmtTotalBid.alpha=0;this._tableContainer.alpha=0;this._safe.alpha=0;this._greenButton.alpha=0;this._greenButton.visible=false;this._safe.visible=false;this._graphics.visible=false;this._bmtTotalBid.visible=false;var m=[3,3,3,0];var n=this._player.balance+this._player.currentBid;var l=Math.floor(n/500);n-=500*l;var p=Math.floor(n/100);n-=100*p;var o=Math.floor(n/50);n-=50*o;var q=Math.floor(n/10);this._finishScreen=new d.FinishScreen(this.game,0,0,[q,o,p,l],this._player.balance)};k.prototype.update=function(){this._chipstFallEmitter.update()};k.prototype.sendChipsToWinner=function(){if(window.sounds){this.game.sound.play("chips_move",0.45)}return 0};k.prototype.showPlayerControls=function(){this.showButton(this._standButton);this.showButton(this._hitButton)};k.prototype.showButton=function(l){this.game.add.tween(l.parent).to({alpha:1},1000*d.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){l.inputEnabled=true})};k.prototype.hideButtons=function(){this.hideButton(this._standButton);this.hideButton(this._hitButton)};k.prototype.hideButton=function(l){l.inputEnabled=false;this.game.add.tween(l.parent).to({alpha:0.5},200*d.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true)};k.prototype.render=function(){};return k}(d.OState));d.PlayState=h;function i(){var k=0;var m=0;var j=0;var l=0;if(!(document.documentElement.clientWidth==0)){j=document.documentElement.clientWidth;l=document.documentElement.clientHeight}k=j;m=l;if(window.innerWidth>window.innerHeight){k=window.innerWidth;m=window.innerHeight}return{width:k,height:m}}function f(j,k){if(k===void 0){k=null}window.trackEvent(j,k)}function a(){}function g(){}function c(){window.trackClick()}})(mygame||(mygame={}));var mygame;(function(a){var b=(function(){function c(){this.balance=500;this.dealTime=5;this.playerMoney=3000;this.soundsEnabled=true;this.width=1136;this.height=640;this.orientation=c.LANDSCAPE}Object.defineProperty(c,"Instance",{get:function(){if(this.instance===null||this.instance===undefined){this.instance=new c()}return this.instance},enumerable:true,configurable:true});return c}());b.LANDSCAPE="landscape";b.PORTRAIT="portrait";a.Controller=b})(mygame||(mygame={}));var mygame;(function(a){var b=(function(){function c(){this.BALANCE={en:"Balance: ",ru:"Баланс: "};this.YOU_WIN={en:"YOU WIN",ru:"ВЫИГРЫШ"};this.GOOD_TRY={en:"Good try!",ru:"Хорошая попытка!"};this.HIT={en:"HIT",ru:"ВЗЯТЬ"};this.BURST={en:"Loose",ru:"Проиграл"};this.WINNER={en:"Winner",ru:"Выиграл"};this.STAND={en:"STAND",ru:"ОСТАНОВИТЬСЯ"};this.INSTALL_AND_PLAY={en:"INSTALL & PLAY",ru:"ИГРАЙ СЕЙЧАС!"};this.GRENN_BUTTON_TEXT={en:"get free tokens",ru:"бесплатные монеты"};this.BLACKJACK={en:"BlackJack!",ru:"???"};this.STAND_TITLE={en:"Stand",ru:"Остановился"};this.HIT_TITLE={en:"Hit",ru:"Взял"};this.COMMENTS=[{en:"Watch\nand\nlearn.",ru:"Смотри\nи\nучись"},{en:"You done?",ru:"Готов?"},{en:"Gotchu!",ru:"Попался!"},{en:"Never had\na chance",ru:"Без\nшансов"},{en:"Well now",ru:"Отлично..."},{en:"Easy.",ru:"Легко!"},{en:"Hold up\nnow.",ru:"Подожди!"},{en:"Huh ho\nexcuse me.",ru:"Ха, нет уж\nизвини"},{en:"No river,\nno fish.",ru:"Нет реки\nнет рыбы"},{en:"Poker is\n100% skill\nand 50%\nluck.",ru:"Покер\nэто\nскилл"},{en:"Life is more\nfun if you\nplay games.",ru:"Играть\nвесело!"},{en:"Not bad!",ru:"Не плохо..."},{en:"Call me\nmaybe?",ru:"Может\nпозвонишь"},{en:"Astounding!",ru:"Невероятно"},{en:"Wow, cool!",ru:"Вау, круто!"},{en:"Unbelievable...",ru:"Вот это да!"},];this.TUTORIAL_STEP_1={en:"To start the game, bet. Let's start with a small amount.",ru:"Чтобы начать игру, сделай ставку. Начнём с небольшой суммы."};this.TUTORIAL_STEP_2={en:"Great, it's time to play!",ru:"Отлично, пришло время играть!"};this.TUTORIAL_STEP_3={en:"To win, score points more than the dealer or 21. Take another card.",ru:"Чтобы выиграть, набери очков больше чем у диллера или 21. Возьми ещё карту. "};this.TUTORIAL_STEP_4={en:"Be careful, if you score more than 21 - you lose. Let's try to play with this hand.",ru:"Осторожно, если наберёшь больше 21 - проиграешь. Попробуем сыграть с этой рукой."};this.TUTORIAL_STEP_5={en:"20 more than 19 - you won!",ru:"20 больше 19 - ты победил! "};this.TUTORIAL_STEP_6={en:"Now play it yourself!",ru:"Теперь сыграй сам!"};this.PLAY={en:"PLAY",ru:"ИГРАТЬ"};this.RESET={en:"CANCEL",ru:"СБРОСИТЬ"};this.PLAYHINT={en:"PLAY",ru:"ИГРАТЬ"};this.LIKE={en:"LIKE BLACKJACK?",ru:"НРАВИТСЯ БЛЭКДЖЕК?"};this.GETAPP={en:"GET ON A NEW LEVEL WITH THIS APP!",ru:"ДОСТИГНИТЕ НОВОГО УРОВНЯ С ЭТИМ ПРИЛОЖЕНИЕМ!"};this.GAMENAME={en:"Blackjack 21: Blackjackist",ru:"Блэкджек 21: Blackjackist"};this.COPYRIGHT={en:"By KamaGames",ru:"от KamaGames"}}Object.defineProperty(c,"Instance",{get:function(){if(this.instance===null||this.instance===undefined){this.instance=new c()}return this.instance},enumerable:true,configurable:true});return c}());b.loc="ru";a.Lang=b})(mygame||(mygame={}));var mygame;(function(b){var a=(function(d){__extends(c,d);function c(){return d!==null&&d.apply(this,arguments)||this}c.prototype.preload=function(){this.load.crossOrigin="anonymous";var e=window.baseURL;this.game.load.image("connect",e+"assets/connect.png");this.game.load.image("preloaderBar",e+"assets/loadingBarOnly.png");this.game.load.image("preloaderBarEmpty",e+"assets/loadingBarEmpty.png")};c.prototype.create=function(){b.Controller.Instance.orientation=b.Controller.LANDSCAPE;if(window.orientation=="p"){b.Controller.Instance.orientation=b.Controller.PORTRAIT}this.game.input.touch.preventDefault=false;this.game.stage.backgroundColor=1907997;this.input.maxPointers=1;this.stage.disableVisibilityChange=true;this.ChangeSize();b.Core.begin(this.game,!this.game.device.desktop);this.game.state.start("Preloader")};c.prototype.ChangeSize=function(){};return c}(Phaser.State));b.Boot=a})(mygame||(mygame={}));var mygame;(function(c){var b;(function(d){d[d.SPADES=0]="SPADES";d[d.HEARTS=1]="HEARTS";d[d.CLUBS=2]="CLUBS";d[d.DIAMONDS=3]="DIAMONDS"})(b=c.SUIT||(c.SUIT={}));var a=(function(e){__extends(d,e);function d(g,f,l,h,j,i){if(i===void 0){i=true}var k=e.call(this,g,f,l)||this;k._suit=h;k._face=j;k._cardName=j;switch(k._suit){case b.DIAMONDS:k._cardName+="d";break;case b.CLUBS:k._cardName+="c";break;case b.HEARTS:k._cardName+="h";break;case b.SPADES:k._cardName+="s";break;default:break}if(i){k._sprite=k.game.add.sprite(0,0,"objects","back.png")}else{k._sprite=k.game.add.sprite(0,0,"objects",k._cardName.toLowerCase()+".png")}k._sprite.scale.set(1.2);k._sprite.anchor.set(0.5);k.addChild(k._sprite);return k}d.prototype.showCard=function(){this._sprite.loadTexture("objects",this._cardName.toLowerCase()+".png")};d.prototype.reveal=function(h){var i=this;var g=this.game.add.tween(this.scale).to({x:0},200,Phaser.Easing.Sinusoidal.InOut,true,h);if(window.sounds){g.onStart.addOnce(function(){i.game.sound.play("choose",0.4)},this)}var f=this.game.add.tween(this.scale).to({x:1},200,Phaser.Easing.Sinusoidal.InOut,false);g.onComplete.addOnce(function(){i._sprite.loadTexture("objects",i._cardName.toLowerCase()+".png");f.start()});return f};Object.defineProperty(d.prototype,"onClick",{set:function(f){this._onClick=f},enumerable:true,configurable:true});d.prototype.discard=function(f){return this.game.add.tween(this.scale).to({x:0},500,Phaser.Easing.Sinusoidal.InOut,true,f)};Object.defineProperty(d.prototype,"myScale",{set:function(f){this._sprite.scale.set(f)},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"onCompleteCallback",{set:function(f){this._cb=f},enumerable:true,configurable:true});d.prototype.flyToHand=function(f){var h=this;if(window.sounds){this.game.sound.play("new_card",0.35)}this.game.add.tween(this._sprite.scale).to({x:1,y:1},300,Phaser.Easing.Sinusoidal.InOut,true);var g=this.game.add.tween(this).to({y:380+31,x:f},300,Phaser.Easing.Sinusoidal.InOut,true);g.onComplete.add(function(){h._cb()},this)};Object.defineProperty(d.prototype,"face",{get:function(){return this._face},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"suit",{get:function(){return this._suit},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"cardName",{get:function(){return this._cardName},enumerable:true,configurable:true});d.prototype.playDestroy=function(h,f){var g=this;this.game.add.tween(this._sprite.scale).to({x:0},200,Phaser.Easing.Sinusoidal.InOut,true,f).onComplete.add(function(){h();g.destroy()},this)};return d}(Phaser.Sprite));a.FACES="A23456789TJQK";c.Card=a})(mygame||(mygame={}));var mygame;(function(b){var a=(function(d){__extends(c,d);function c(f,e,j,g,h){var i=d.call(this,f,e,j)||this;i._chips=g;i._balance=h;i._ipad=false;if(b.Core.isLandscape){if(b.Core.height/b.Core.width>0.63){i._ipad=true}}else{if(b.Core.width/b.Core.height>0.73){i._ipad=true}}i._shadowOsprite=new b.OSprite(0,0).enabledBgMode().end();i._shadowOsprite.otherXY(0,0).end();i._shadow=i.game.add.sprite(0,0,"objects","shadow.png");i._shadow.width=b.Core.defaultWidth;i._shadow.height=b.Core.defaultHeight;i._shadow.alpha=0;i._shadowOsprite.addChild(i._shadow);i._shadow.inputEnabled=true;i._shadow.events.onInputDown.add(function(){});i.createUIBottom();i.createUITitle();i.createUIPlay();i.createLogo();i.game.add.tween(i._shadow).to({alpha:1},500,Phaser.Easing.Sinusoidal.Out,true);return i}c.prototype.createChips=function(){var f=this;var e=0;if(this._chips[2]>0){this.cerateCurrentChips("red@2x",this._chips[2]);setTimeout(function(){if(window.sounds){f.game.sound.play("chips_move",0.45)}},750+300*e);e+=1}if(this._chips[0]>0){this.cerateCurrentChips("blue@2x",this._chips[0]);setTimeout(function(){if(window.sounds){f.game.sound.play("chips_move",0.45)}},750+300*e);e+=1}if(this._chips[1]>0){this.cerateCurrentChips("green@2x",this._chips[1]);setTimeout(function(){if(window.sounds){f.game.sound.play("chips_move",0.45)}},750+300*e);e+=1}if(this._chips[3]>0){this.cerateCurrentChips("orange@2x",this._chips[3]);setTimeout(function(){if(window.sounds){f.game.sound.play("chips_move",0.45)}},750+300*e);e+=1}};c.prototype.cerateCurrentChips=function(j,h){for(var g=0;g<h*2;g++){var l=0;var k=0;var f=0;switch(j){case"blue@2x":l=24;k=-188;f=500;break;case"green@2x":l=-66;k=-180;f=0;break;case"red@2x":l=-30;k=-226;f=400;break;case"orange@2x":l=-20;k=-150;f=200;break}var e=this.game.add.sprite(l,k-800,"objects",j+".png");e.scale.set(1);this.game.add.tween(e).to({y:k-7*g},500,Phaser.Easing.Sinusoidal.Out,true,700+f+(130+f/10)*g);this._UITitleSprite.addChild(e)}};c.prototype.createLogo=function(){if(this._ipad){this._UILogo=new b.OSprite(162+60,31);this._UILogo.otherXY(b.Core.centerY,31).end()}else{this._UILogo=new b.OSprite(162+60,31);this._UILogo.otherXY(b.Core.centerY,31).end()}var f=this.game.add.sprite(0,0,"objects","logo_main.png");f.anchor.set(0.5,0);this._UILogo.addChild(f);var e=new FxSplash(this.game,f.width+10,f.height,0);f.addChild(e);e.x-=f.width/2-2;e.playLoop(1000,2000)};c.prototype.createUIPlay=function(){var i=this;if(this._ipad){this._UIButtonPlay=new b.OSprite(b.Core.centerX,460);this._UIButtonPlay.otherXY(b.Core.centerY,895).end()}else{this._UIButtonPlay=new b.OSprite(b.Core.centerX,535);this._UIButtonPlay.otherXY(b.Core.centerY,880).end()}this._UIButtonPlaySprite=this.game.add.sprite(0,0);this._UIButtonPlay.addChild(this._UIButtonPlaySprite);var e=this.game.add.sprite(0,0,"objects","play.png");this._UIButtonPlaySprite.addChild(e);e.scale.set(1);e.anchor.set(0.5,0.5);var f=new FxSplash(this.game,e.width-10,e.height-10,10);this._UIButtonPlaySprite.addChild(f);f.x+=5-220;f.y+=3-53;f.playLoop();var h=this.game.add.bitmapText(0,0,"font_all",b.Lang.Instance.PLAYHINT[window.lang],72);this._UIButtonPlaySprite.addChild(h);h.x=(e.width-h.width)/2-220;h.y=(e.height-h.height)/2-15-53;var g=this._UIButtonPlaySprite.y;this._UIButtonPlaySprite.y+=450;this._UIButtonPlaySprite.inputEnabled=false;this._UIButtonPlaySprite.events.onInputDown.add(function(){window.trackClick()});this.game.add.tween(this._UIButtonPlaySprite).to({y:g},500,Phaser.Easing.Sinusoidal.Out,true,1200).onComplete.addOnce(function(){i.game.add.tween(i._UIButtonPlaySprite.scale).to({x:1.1,y:1.1},250,Phaser.Easing.Sinusoidal.Out,true).loop(true).yoyo(true,250);i._UIButtonPlaySprite.inputEnabled=true},this)};c.prototype.createUIText=function(){if(this._ipad){this._UIText=new b.OSprite(b.Core.centerX,b.Core.centerY-75);this._UIText.otherXY(b.Core.centerY,b.Core.centerX-48).end()}else{this._UIText=new b.OSprite(b.Core.centerX,b.Core.centerY-48);this._UIText.otherXY(b.Core.centerY,b.Core.centerX-48).end()}this._UITextLikeSprite=this.game.add.sprite(0,0);this._UIText.addChild(this._UITextLikeSprite);this._UITextGetSprite=this.game.add.sprite(0,0);this._UIText.addChild(this._UITextGetSprite);var h=this.game.add.bitmapText(0,75,"font_all",b.Lang.Instance.LIKE[window.lang],71);h.anchor.set(0.5);this._UITextLikeSprite.addChild(h);var g=this.game.add.bitmapText(0,125,"font_all",b.Lang.Instance.GETAPP[window.lang],50);g.anchor.set(0.5);this._UITextGetSprite.addChild(g);if(window.lang=="ru"){g.fontSize=33}var f=this._UITextLikeSprite.x;var e=this._UITextGetSprite.x;this._UITextLikeSprite.x-=1000;this._UITextGetSprite.x+=1400;this.game.add.tween(this._UITextLikeSprite).to({x:f},500,Phaser.Easing.Sinusoidal.Out,true,700);this.game.add.tween(this._UITextGetSprite).to({x:e},500,Phaser.Easing.Sinusoidal.Out,true,800)};c.prototype.createUITitle=function(){if(this._ipad){this._UITitle=new b.OSprite(b.Core.centerX,b.Core.centerY-75);this._UITitle.otherXY(b.Core.centerY,b.Core.centerX-48).end()}else{this._UITitle=new b.OSprite(b.Core.centerX,b.Core.centerY-48);this._UITitle.otherXY(b.Core.centerY,b.Core.centerX-48).end()}this._UITitleSprite=this.game.add.sprite(0,0);this._UITitle.addChild(this._UITitleSprite);this.createChips();var g=this.game.add.sprite(0,0);var j=this.game.add.image(0,0,"objects","lenta.png");j.anchor.set(1,0.5);g.addChild(j);var f=this.game.add.image(0,0,"objects","lenta.png");f.anchor.set(1,0.5);g.addChild(f);f.scale.x=-1;var e=this.game.add.sprite(0,0);if(this._balance<=0){var k=this.game.add.bitmapText(0,-40,"font_all",b.Lang.Instance.GOOD_TRY[window.lang],72);k.tint=16241921;k.anchor.set(0.5);e.addChild(k)}else{var k=this.game.add.bitmapText(-60,-40,"font_all",b.Lang.Instance.YOU_WIN[window.lang],72);k.tint=16241921;e.addChild(k);k.anchor.set(0.5);var i=this.game.add.bitmapText(0,0,"font_all","$"+this._balance+"!",72);e.addChild(i);i.anchor.set(0.5);if(this._balance>=1000){k.x-=40;i.x=k.x+k.width-20;i.y=k.y}else{if(this._balance<1000&&this._balance>=100){k.x-=20;i.x=k.x+k.width-35;i.y=k.y}else{i.x=k.x+k.width-45;i.y=k.y}}}this._UITitleSprite.addChild(g);this._UITitleSprite.addChild(e);this.createUIText();var h=this._UITitleSprite.y;this._UITitleSprite.y-=800;this.game.add.tween(this._UITitleSprite).to({y:h},500,Phaser.Easing.Sinusoidal.Out,true,200)};c.prototype.createUIBottom=function(){if(this._ipad){this._UIBottom=new b.OSprite(0,b.Core.defaultHeight-75);this._UIBottom.otherXY(0,b.Core.defaultWidth-100).end()}else{this._UIBottom=new b.OSprite(0,b.Core.defaultHeight-100);this._UIBottom.otherXY(0,b.Core.defaultWidth-100).end()}var e=this.game.add.graphics(0,0);e.beginFill(17783);e.drawRect(0,0,2280,100);e.endFill();var f=this.game.add.sprite(0,0,"icon2x");f.anchor.set(0.5);f.scale.set(0.75);f.x=100;f.y=0;var i=this.game.add.bitmapText(200,10,"font_all",b.Lang.Instance.GAMENAME[window.lang],34);var h=this.game.add.bitmapText(200,40,"font_all",b.Lang.Instance.COPYRIGHT[window.lang],34);this._UIBottomSprite=this.game.add.sprite(0,0);this._UIBottomSprite.addChild(e);this._UIBottomSprite.addChild(f);this._UIBottomSprite.addChild(h);this._UIBottomSprite.addChild(i);this._UIBottom.addChild(this._UIBottomSprite);var g=this._UIBottomSprite.y;this._UIBottomSprite.y+=230;this.game.add.tween(this._UIBottomSprite).to({y:g},500,Phaser.Easing.Sinusoidal.Out,true,2200)};return c}(Phaser.Sprite));b.FinishScreen=a})(mygame||(mygame={}));var FxSplash=(function(a){__extends(b,a);function b(f,c,i,j,e){if(e===void 0){e=false}var k=a.call(this,f)||this;var d=f.add.graphics(0,0);if(e){d.beginFill(0,0.5)}else{d.beginFill(0)}d.drawRoundedRect(0,0,c,i,j);d.endFill();k.addChild(d);var g=k.game.add.sprite(0,0,"objects","splash.png");if(!e){g.mask=d}k.addChild(g);g.x=-400;k.splash=g;return k}b.prototype.playLoop=function(e,c,d){if(e===void 0){e=1000}if(c===void 0){c=500}if(d===void 0){d=false}this.game.add.tween(this.splash).to({x:500},e,Phaser.Easing.Sinusoidal.Out,true,c).loop(true).yoyo(d)};b.prototype.playOnce=function(){this.game.add.tween(this.splash).to({x:500},1000,Phaser.Easing.Sinusoidal.Out,true)};return b}(Phaser.Group));var mygame;(function(a){var b=(function(c){__extends(d,c);function d(){var e=c.call(this,1280,720,Phaser.AUTO,"mdsp-creative",null,false,true)||this;if(window.innerMode=="client"){window.customClientWidth=function(){return document.documentElement.clientWidth};window.customClienHeight=function(){return document.documentElement.clientHeight}}a.Core.init(1280,720);e.state.add("Boot",a.Boot,false);e.state.add("Preloader",a.Preloader,false);e.state.add("PlayState",a.PlayState,false);e.state.start("Boot");return e}return d}(Phaser.Game));a.Game=b})(mygame||(mygame={}));var mygame;(function(a){var b=(function(){function c(){}c.name2suit=function(d){var e;switch(d.toLowerCase()){case"s":e=a.SUIT.SPADES;break;case"c":e=a.SUIT.CLUBS;break;case"d":e=a.SUIT.DIAMONDS;break;case"h":e=a.SUIT.HEARTS;break;default:break}return e};c.enableDrag=function(d){d.inputEnabled=true;d.input.enableDrag();d.events.onDragUpdate.add(function(){},this)};return c}());b.CARD_SCALE_TIME=150;b.CARD_FLY_TIME=500;b.TUTORIAL_CARDS=["qh","5h","4d","7s","6s","7h"];b.CARDS=["2c","2d","2h","2s","ac","3d","3h","as","4c","4d","4h","4s","5c","5d","5h","5s","6c","6d","6h","6s","7c","7d","7h","7s","8c","8d","8h","8s","9c","9d","9h","9s","ac","ad","ah","as","jc","jd","jh","js","kc","kd","kh","ks","qc","qd","qh","qs","tc","td","th","ts"];b.GIFT=-1;b.HINT_INITIAL_MAX_WIDTH=300;b.TIME_MULTIPLAYER=0.5;b.BID_WAITING_MAX=window.playerWaintingTime;a.GameConfig=b})(mygame||(mygame={}));var mygame;(function(b){var c=(function(){function d(){}d.getRandomItem=function(e){var f=Math.floor(b.GameConfig.rnd.random()*e.length);return e[f]};d.removeRandomItem=function(e){if(window.tutorial){return b.GameConfig.TUTORIAL_CARDS.shift()}var f=Math.floor(b.GameConfig.rnd.random()*e.length);return e.splice(f,1)[0]};return d}());b.Utils=c;var a=(function(){function d(e){this.N=624;this.M=397;this.MATRIX_A=2567483615;this.UPPER_MASK=2147483648;this.LOWER_MASK=2147483647;this.mt=new Array(this.N);this.mti=this.N+1;if(e==undefined){e=new Date().getTime()}this.init_genrand(e)}d.prototype.init_genrand=function(e){this.mt[0]=e>>>0;for(this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^(this.mt[this.mti-1]>>>30);this.mt[this.mti]=(((((e&4294901760)>>>16)*1812433253)<<16)+(e&65535)*1812433253)+this.mti;this.mt[this.mti]>>>=0}};d.prototype.init_by_array=function(e,m){var h,g,f;this.init_genrand(19650218);h=1;g=0;f=(this.N>m?this.N:m);for(;f;f--){var l=this.mt[h-1]^(this.mt[h-1]>>>30);this.mt[h]=(this.mt[h]^(((((l&4294901760)>>>16)*1664525)<<16)+((l&65535)*1664525)))+e[g]+g;this.mt[h]>>>=0;h++;g++;if(h>=this.N){this.mt[0]=this.mt[this.N-1];h=1}if(g>=m){g=0}}for(f=this.N-1;f;f--){var l=this.mt[h-1]^(this.mt[h-1]>>>30);this.mt[h]=(this.mt[h]^(((((l&4294901760)>>>16)*1566083941)<<16)+(l&65535)*1566083941))-h;this.mt[h]>>>=0;h++;if(h>=this.N){this.mt[0]=this.mt[this.N-1];h=1}}this.mt[0]=2147483648};d.prototype.genrand_int32=function(){var g;var f=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var e;if(this.mti==this.N+1){this.init_genrand(5489)}for(e=0;e<this.N-this.M;e++){g=(this.mt[e]&this.UPPER_MASK)|(this.mt[e+1]&this.LOWER_MASK);this.mt[e]=this.mt[e+this.M]^(g>>>1)^f[g&1]}for(;e<this.N-1;e++){g=(this.mt[e]&this.UPPER_MASK)|(this.mt[e+1]&this.LOWER_MASK);this.mt[e]=this.mt[e+(this.M-this.N)]^(g>>>1)^f[g&1]}g=(this.mt[this.N-1]&this.UPPER_MASK)|(this.mt[0]&this.LOWER_MASK);this.mt[this.N-1]=this.mt[this.M-1]^(g>>>1)^f[g&1];this.mti=0}g=this.mt[this.mti++];g^=(g>>>11);g^=(g<<7)&2636928640;g^=(g<<15)&4022730752;g^=(g>>>18);return g>>>0};d.prototype.genrand_int31=function(){return(this.genrand_int32()>>>1)};d.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)};d.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};d.prototype.genrand_real3=function(){return(this.genrand_int32()+0.5)*(1/4294967296)};d.prototype.genrand_res53=function(){var f=this.genrand_int32()>>>5,e=this.genrand_int32()>>>6;return(f*67108864+e)*(1/9007199254740992)};return d}());b.MersenneTwister=a})(mygame||(mygame={}));var mygame;(function(b){var a;(function(d){d[d.IDLE=0]="IDLE";d[d.WAITING=1]="WAITING"})(a=b.BotState||(b.BotState={}));var c=(function(e){__extends(d,e);function d(q,o,n,j,s){var m=e.call(this,q,o,n)||this;m._cards=[];m._gender=0;m._actionWasFired=false;m._cardsInHand=0;m._burst=false;m._state=a.IDLE;m._bg=m.game.add.sprite(0,0,"objects","userIcon0002.png");m._bg.anchor.set(0.5);m._bg.scale.set(0.8);m.addChild(m._bg);m._graphics=m.game.add.graphics(0,0);m.addChild(m._graphics);m._graphics.alpha=0;m._graphics.beginFill(0);m._graphics.drawRect(-60,-60,120,120);m._graphics.endFill();m._balance=2000+Math.floor(-300+600*Math.random());m._btmTextName=m.game.add.bitmapText(0,-70,"font_all_30","",24);m._btmTextName.anchor.set(0.5);m.addChild(m._btmTextName);m._btmTextBalance=m.game.add.bitmapText(0,74,"font_all_30","$"+m._balance.toString(),24);m._btmTextBalance.anchor.set(0.5);m.addChild(m._btmTextBalance);m._bid=0;m._chip=m.game.add.sprite(0,0);m._chip.anchor.set(0.5);m._chip.visible=false;m._graphicsBid=m.game.add.graphics(0,0);m._graphicsBid.beginFill(0,0.5);m._graphicsBid.drawRoundedRect(-20,40,80,30,10);m._graphicsBid.endFill();m._chip.addChild(m._graphicsBid);m._chipSprite=m.game.add.sprite(0,0,"objects","blue_chip.png");m._chip.addChild(m._chipSprite);m.game.world.addChild(m._chip);m._btmTextBid=m.game.add.bitmapText(40-20,57,"font_all_30","",24);m._btmTextBid.anchor.set(0.5);m._chip.addChild(m._btmTextBid);m._pass=false;var i=Math.atan2(m.y,m.x);var g=new Phaser.Point(Math.cos(i),Math.sin(i));var h=new Phaser.Point(0.35,0.35);if(s){h.x=-0.35}if(j){h.y=-0.35}m._myMask=m.game.add.graphics(0,0);m._myMask.beginFill(16777215);m._myMask.arc(0,0,110,-90/180*Math.PI+0.1,0,true);m._myMask.endFill();m.addChild(m._myMask);m._greenBorder=m.game.add.sprite(0,0,"objects","userIcon0004_w.png");m._greenBorder.anchor.set(0.5);m._greenBorder.scale.set(0.8);m._greenBorder.alpha=0;m.addChild(m._greenBorder);m._greenBorder.mask=m._myMask;m._cardsAvatar=[];var r=m.game.add.sprite(-60,-60+5,"objects","2d.png");r.alpha=0;m._cardsAvatar.push(r);m.addChild(r);m._highlightBorderBot=[];m._highlightBorderBot.push(m.game.add.sprite(-10,-10,"objects","cardFrame.png"));m._highlightBorderBot.push(m.game.add.sprite(-10,-10,"objects","cardFrame.png"));m._highlightBorderBot[0].scale.set(1.3);m._highlightBorderBot[1].scale.set(1.3);m._highlightBorderBot[0].alpha=0;m._highlightBorderBot[1].alpha=0;r.addChild(m._highlightBorderBot[0]);var p=m.game.add.sprite(30,0,"objects","2d.png");m._cardsAvatar.push(p);r.addChild(p);p.addChild(m._highlightBorderBot[1]);m._comment=m.game.add.bitmapText(0,65,"font_all_30","",24);m._comment.anchor.set(0.5);m._comment.alpha=0;m._comment.align="center";m.addChild(m._comment);1;m._hasPresent=false;var l;var f;if(j){f=20}else{f=-40}if(s){l=-120}else{l=30}m._present=m.game.add.sprite(l,f,"objects","gift_7.png");m._present.visible=false;m.addChild(m._present);if(j){f=-40;l=100;if(s){l=-100}}else{f=120;l=0}var k=m.game.rnd.between(1,20);m._emoji=m.game.add.sprite(l,f,"emoji","image_part_"+k+".png");m._emoji.anchor.set(0.5);m._emoji.alpha=0;m.addChild(m._emoji);m._cardsContainer=m.game.add.sprite(0,-100);m.addChild(m._cardsContainer);m._cardCounter=new b.CardCounter(m.game,-10,60);m._cardCounter.visible=false;m._cardsContainer.addChild(m._cardCounter);return m}d.prototype.hideBorder=function(){this._state=a.IDLE;this._greenBorder.alpha=0};Object.defineProperty(d.prototype,"gender",{set:function(f){this._gender=f},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"cardsInHand",{get:function(){return this._cardsInHand},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"hasPresent",{get:function(){return this._hasPresent},enumerable:true,configurable:true});d.prototype.sendPresent=function(i){var g=this.game.rnd.between(1,7);if(b.GameConfig.GIFT<0){b.GameConfig.GIFT=g}else{if(b.GameConfig.GIFT==g){if(g==1){g=2}else{g--}}}var h=this.game.add.sprite(this.x+this._present.x,this.y+this._present.y,"objects","gift_"+g+".png");this.parent.addChild(h);var f=i.presentCoordinates;f.x+=i.x,f.y+=i.y;this.game.add.tween(h).to({x:f.x,y:f.y},800*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){i.present=g;h.destroy()})};Object.defineProperty(d.prototype,"present",{set:function(f){this._present.loadTexture("objects","gift_"+f+".png");this._present.visible=true},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"presentCoordinates",{get:function(){return new Phaser.Point(this._present.x,this._present.y)},enumerable:true,configurable:true});d.prototype.initBotCards=function(){var i=Math.atan2(this.y,this.x);var f=new Phaser.Point(Math.cos(i),Math.sin(i));var h=new Phaser.Point(0.35,0.35);this._cardBacks=this.game.add.sprite(this.x-f.x*120,this.y-f.y*120,"objects","back.png");this._cardBacks.anchor.set(0.5);this._cardBacks.scale.set(h.x,h.y);this._cardBacks.alpha=0;var g=this.game.add.sprite(50,0,"objects","back.png");g.anchor.set(0.5);g.angle=13;this._cardBacks.addChild(g);this.parent.addChild(this._cardBacks)};d.prototype.setChipPoisition=function(f,g){this._chipPosition=new Phaser.Point(f,g)};Object.defineProperty(d.prototype,"nextCommandCallback",{set:function(f){this._nextCommandCallback=f},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"currentBid",{get:function(){return this._bid},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"getGirlPositionCallback",{set:function(f){this._girlPositionCallback=f},enumerable:true,configurable:true});d.prototype.hideCardBorder=function(f){if(this._highlightBorderBot[f].alpha>0){this.game.add.tween(this._highlightBorderBot[f]).to({alpha:0},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true)}};d.prototype.highlightCard=function(f){if(this._highlightBorderBot[f].alpha<1){this.game.add.tween(this._highlightBorderBot[f]).to({alpha:1},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true)}};d.prototype.showComment=function(){var f=this;this._comment.text=Phaser.ArrayUtils.getRandomItem(b.Lang.Instance.COMMENTS)[window.lang];if(!this._pass){this.game.add.tween(this._graphics).to({alpha:0.5},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){f.game.add.tween(f._graphics).to({alpha:0},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true,window.commentDelay)})}this.game.add.tween(this._comment).to({alpha:1,y:0},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){f.game.add.tween(f._comment).to({alpha:0,y:-65},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true,window.commentDelay)})};d.prototype.fold=function(){var f=this;this._actionWasFired=true;this._state=a.IDLE;this._greenBorder.alpha=0;this._btmTextName.tint=11184810;this._btmTextBalance.tint=11184810;this._pass=true;if(window.sounds){this.game.sound.play("choose",0.4)}this.game.add.tween(this._graphics).to({alpha:0.6},800*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){f._nextCommandCallback()},this);this.hideCards()};Object.defineProperty(d.prototype,"pass",{get:function(){return this._pass},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"balance",{get:function(){return this._balance},set:function(f){this._balance=f},enumerable:true,configurable:true});d.prototype.showWinnerBorder=function(){};d.prototype.bid=function(g){var i=this;this._actionWasFired=true;if(window.sounds){this.game.sound.play("chips_bet",0.4)}this._graphicsBid.visible=true;this.game.world.removeChild(this._chip);this.addChild(this._chip);var h=Math.atan2(this.y,this.x);var f=new Phaser.Point(Math.cos(h),Math.sin(h));if(g>=500){this._chipSprite.loadTexture("objects","orange_chip.png")}else{if(g>=100){this._chipSprite.loadTexture("objects","red_chip.png")}else{if(g>=50){this._chipSprite.loadTexture("objects","green_chip.png")}else{this._chipSprite.loadTexture("objects","blue_chip.png")}}}this._chip.visible=true;this.game.add.tween(this._chip).to({x:this._chipPosition.x,y:this._chipPosition.y},200,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){i._nextCommandCallback()},this);this._balance-=g-this._bid;if(this._balance<=0){this._balance=Math.floor(1500+Math.random()*700)}this.updateBalanceText();this._bid=g;this._btmTextBid.text="$"+this._bid.toString();this._btmTextBid.visible=true};d.prototype.waiting=function(f){var g=this;this.tweenTint(this._greenBorder,"#6be537","#f2fa2c",f/2);this.game.time.events.add(f/2,function(){g.tweenTint(g._greenBorder,"#f2fa2c","#df3d3d",f/2)},this);this._greenBorder.alpha=1;this._greenBorder.visible=true;this._myMask.clear();this._myMask.beginFill(16777215);this._myMask.drawCircle(0,0,210);this._myMask.endFill();this._timer=f;this._borderTimer=window.playerWaintingTime;this._state=a.WAITING};d.prototype.returnChips=function(){this._chip.visible=false;this.generateChips(this._bid,new Phaser.Point(this.x,this.y))};d.prototype.moneyToDealer=function(){if(!this._pass||this._graphicsBid.visible){this._graphicsBid.visible=false;this._btmTextBid.visible=false;var g=this._chip.worldPosition.x;var f=this._chip.worldPosition.y;this.removeChild(this._chip);this._chip.position.set(g,f);this.game.world.addChild(this._chip);this._chip.visible=false;var h=new Phaser.Point(0,-210+90+20);return this.generateChips(this._bid,h)}return null};d.prototype.dCard=function(f,g){this._dCard=new Phaser.Point(f,g);this._cardsContainer.x=f;this._cardsContainer.y=g};d.prototype.generateChips=function(m,f){var q=Math.floor(m/500);m-=500*q;var g=Math.floor(m/100);m-=100*g;var n=Math.floor(m/50);m-=50*n;var o=Math.ceil(m/10);var j=0;var r;var h;for(var l=0;l<q;l++){h=this.generateChip("orange_chip.png",f,150*j);if(h!=null){r=h}j++}for(var l=0;l<g;l++){h=this.generateChip("red_chip.png",f,150*j);if(h!=null){r=h}j++}for(var l=0;l<n;l++){h=this.generateChip("green_chip.png",f,150*j);if(h!=null){r=h}j++}for(var l=0;l<o;l++){h=this.generateChip("blue_chip.png",f,150*j);if(h!=null){r=h}j++}return r};d.prototype.generateChip=function(i,j,f){var k=this;var h=this.game.add.sprite(this.x+this._chipPosition.x+this._chipSprite.width/2,this.y+this._chipPosition.y+this._chipSprite.height/2,"objects",i);h.anchor.set(0.5);this.parent.addChild(h);var g=this.game.add.tween(h).to({x:j.x,y:j.y},500*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true,f);g.onComplete.addOnce(function(){k.game.add.tween(h).to({alpha:0},150*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){h.destroy()})},this);return g};d.prototype.myCheck=function(i,j){var n=this;if(j===void 0){j=true}if(this._bid==i){this._nextCommandCallback()}else{if(j){this.changeName(b.Lang.Instance.STAND_TITLE[window.lang],15923756)}var h=this.game.add.sprite(0,0);var m=i;var k=void 0;var g=i-this._bid;if(g>=500){k="orange_chip.png"}else{if(g>=100){k="red_chip.png"}else{if(g>=50){k="green_chip.png"}else{k="blue_chip.png"}}}var l=this.game.add.graphics(0,0);l.beginFill(0,0.5);l.drawRoundedRect(20,2,80,30,10);l.endFill();h.addChild(l);h.addChild(this.game.add.sprite(0,0,"objects",k));this.addChild(h);var f=this.game.add.bitmapText(40,5,"font_all_30","",24);h.addChild(f);this._state=a.IDLE;this._greenBorder.alpha=0;this._actionWasFired=true;f.text="$"+(i-this._bid).toString();this.game.add.tween(h).to({x:this._chipPosition.x,y:this._chipPosition.y},500*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){n.game.add.tween(h).to({alpha:0},150*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){h.destroy()},n)});this._balance-=i-this._bid;if(this._balance<=0){this._balance=Math.floor(1500+Math.random()*700)}this.updateBalanceText();this._bid=i;if(this._bid>=500){this._chipSprite.loadTexture("objects","orange_chip.png")}else{if(this._bid>=100){this._chipSprite.loadTexture("objects","red_chip.png")}else{if(this._bid>=50){this._chipSprite.loadTexture("objects","green_chip.png")}else{this._chipSprite.loadTexture("objects","blue_chip.png")}}}if(window.sounds){this.game.sound.play("chips_bet",0.4)}this.game.add.tween(this._btmTextBid).to({alpha:0},500*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Linear.None,true).onComplete.addOnce(function(){n._btmTextBid.text="$"+n._bid.toString();n.game.add.tween(n._btmTextBid).to({alpha:1},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Linear.None,true).onComplete.addOnce(function(){n._nextCommandCallback()},n)},this)}};Object.defineProperty(d.prototype,"cardsAngle",{set:function(f){this._cardsContainer.angle=f},enumerable:true,configurable:true});d.prototype.resetBid=function(){this._bid=0;this._chip.position.set(0,0);this._chip.visible=false};d.prototype.showCards=function(){var f=this;this.game.add.tween(this._cardsAvatar[0]).to({alpha:1},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){f.game.add.tween(f._cardsAvatar[0]).to({alpha:0},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true,2000)},this);this.hideCards()};d.prototype.sendChipsToWinnet=function(f){if(!this._pass){this.game.add.tween(this._chip).to({x:f.x,y:f.y},800*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true);this._bid=0}};d.prototype.updateBalance=function(f){this._balance+=f};d.prototype.updateBalanceText=function(){this._btmTextBalance.text="$"+this._balance};d.prototype.setOriginalName=function(){this._btmTextName.text="";this._btmTextName.tint=16777215};d.prototype.changeName=function(f,g){if(this._gender>0&&window.lang=="ru"&&(f==b.Lang.Instance.STAND_TITLE.ru||f==b.Lang.Instance.HIT_TITLE.ru)){}this._btmTextName.text=f;this._btmTextName.tint=g};d.prototype.tweenTint=function(k,j,g,i,m){if(i===void 0){i=250}if(m===void 0){m=null}if(k){var f=Phaser.Color.hexToColor(j);var l=Phaser.Color.hexToColor(g);var h={step:0};this._colorTween=this.game.add.tween(h).to({step:100},i);this._colorTween.onUpdateCallback(function(){k.tint=Phaser.Color.interpolateRGB(f.r,f.g,f.b,l.r,l.g,l.b,100,h.step)});if(m){this._colorTween.onComplete.add(function(){m()})}this._colorTween.start()}};d.prototype.myReset=function(){this.hideCards();this._burst=false;this._cardsInHand=0;this._btmTextBalance.tint=16777215;this._actionWasFired=false;this._bid=0;this.updateBalanceText();this._pass=false;this._chip.position.set(0,0);this._chip.visible=false;if(this._cardBacks){this._cardBacks.alpha=0}this.hideCardBorder(0);this.hideCardBorder(1);this._graphics.alpha=0;this._cards.length=0;this._cardCounter.myreset();this._cardCounter.visible=false;var g=Math.atan2(this.y,this.x);var f=new Phaser.Point(Math.cos(g),Math.sin(g))};d.prototype.hideCards=function(k){var m=this;if(k===void 0){k=true}var h;var g=[];this._cardCounter.visible=false;if(this._cards.length>0){var l=function(o){var q=j._cards[o];j._cardsContainer.removeChild(q);j.parent.addChild(q);var n=j.x+j._cardsContainer.x+d.CARD_POSITIONS[o].x*Math.cos(j._cardsContainer.rotation)-d.CARD_POSITIONS[o].y*Math.sin(j._cardsContainer.rotation);var p=j.y+j._cardsContainer.y+d.CARD_POSITIONS[o].y*Math.cos(j._cardsContainer.rotation)+d.CARD_POSITIONS[o].x*Math.sin(j._cardsContainer.rotation);q.position.set(n,p);q.angle=j._cardsContainer.angle;h=j.game.add.tween(q).to({x:-20,y:-210+60,alpha:0,angle:0},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,k,100*o);h.onComplete.addOnce(function(){q.destroy()})};var j=this;for(var f=0;f<this._cards.length;f++){l(f)}h.onComplete.addOnce(function(){m._cards.length=0});if(!k){g.push(h)}}return g};d.prototype.showEmoji=function(){this.game.add.tween(this._emoji).to({alpha:1},400*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true)};d.prototype.hideEmoji=function(){this._emoji.alpha=0};d.prototype.hideEverything=function(){this._chip.visible=false;if(this._cardBacks){this._cardBacks.visible=false;this.hideEmoji();this.hideCardBorder(0);this.hideCardBorder(1)}this._bg.visible=false};Object.defineProperty(d.prototype,"burst",{get:function(){return this._burst},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"points",{get:function(){return this._cardCounter.amount},enumerable:true,configurable:true});d.prototype.win=function(){this.changeName(b.Lang.Instance.WINNER[window.lang],15923756);this._burst=true;this.game.add.tween(this._cardsContainer.scale).to({x:1.2,y:1.2},500*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true,0,0,true)};d.prototype.loose=function(){this.changeName(b.Lang.Instance.BURST[window.lang],16711680);this._burst=true;this.game.add.tween(this._cardsContainer.scale).to({x:1.2,y:1.2},500*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true,0,0,true)};d.prototype.addCards=function(i,j){var k=this;if(j===void 0){j=0}var f=this.game.add.sprite(d.CARD_POSITIONS[this._cardsInHand].x,d.CARD_POSITIONS[this._cardsInHand].y,"objects",i+".png");this._cards.push(f);f.alpha=0;f.scale.set(0.45);f.anchor.set(0.5);this.parent.addChild(f);var m=this._girlPositionCallback();var h=Math.atan2(this.y,this.x);var g=new Phaser.Point(Math.cos(h),Math.sin(h));var l=this._cardsInHand;f.angle=180+this._cardsContainer.angle;f.position.set(-20,-210+60);var o=this.game.add.tween(f).to({x:this.x+this._cardsContainer.x+d.CARD_POSITIONS[l].x*Math.cos(this._cardsContainer.rotation)-d.CARD_POSITIONS[l].y*Math.sin(this._cardsContainer.rotation),y:this.y+this._cardsContainer.y+d.CARD_POSITIONS[l].y*Math.cos(this._cardsContainer.rotation)+d.CARD_POSITIONS[l].x*Math.sin(this._cardsContainer.rotation),angle:360+this._cardsContainer.angle,alpha:1},600*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true,j);this._cardCounter.addCard(i,true);var n;var p;if(this._cardCounter.amount>21){this._burst=true}o.onComplete.add(function(){f.angle=0;f.position.set(d.CARD_POSITIONS[l].x,d.CARD_POSITIONS[l].y);k.parent.removeChild(f);if(!k._cardCounter.visible){k._cardCounter.visible=true}k._cardsContainer.addChild(f);k._cardCounter.updateText();if(k._cardCounter.amount>21){k.loose();k.game.time.events.add(750,function(){k.hideCards();k.game.time.events.add(750,function(){k.moneyToDealer()},k)},k)}});this._cardsInHand++;return o};return d}(Phaser.Sprite));c.CARD_POSITIONS=[{x:-40,y:20},{x:-20,y:0},{x:0,y:0},{x:20,y:20}];b.Bot=c})(mygame||(mygame={}));var mygame;(function(a){var b=(function(c){__extends(d,c);function d(f,e,h){var g=c.call(this,f,e,h)||this;g._counter=0;g._graphics=g.game.add.graphics(0,0);g._graphics.beginFill(0,0.5).drawRoundedRect(-25,-12,50,24,5).endFill();g.addChild(g._graphics);g._bmText=g.game.add.bitmapText(0,0,"font_all_30","",20);g._bmText.anchor.set(0.5);g.addChild(g._bmText);g._amountOfCard=0;g._ace=false;g._wasDec=false;return g}Object.defineProperty(d.prototype,"cardsNumber",{get:function(){return this._amountOfCard},enumerable:true,configurable:true});d.prototype.makeMeGreen=function(){this._bmText.tint=65280};d.prototype.addNumber=function(e){this._counter+=e;if(this._counter>=10000){this._bmText.text=Math.floor(this._counter/1000)+"k"}else{this._bmText.text=this._counter.toString()}};d.prototype.setRectangleSize=function(e,f,g,i){this._graphics.clear().beginFill(0,i).drawRoundedRect(-e/2,-f/2,e,f,g).endFill()};d.prototype.setFontSize=function(e){this._bmText.fontSize=e};d.prototype.addCard=function(f,e){if(e===void 0){e=false}this._amountOfCard++;var g=f[0].toLowerCase();if(g>="2"&&g<="9"){this._counter+=+g}else{if(g=="a"){this._ace=true;this._counter+=11}else{this._counter+=10}}if(this._counter>21&&this._ace&&!this._wasDec){this._counter-=10;this._wasDec=true}if(!e){this.updateText()}};d.prototype.updateText=function(){this._bmText.text=this._counter.toString();if(this._counter>21){this._bmText.tint=16711680}else{if(this._counter==21){this._bmText.tint=65280}}};d.prototype.myreset=function(){this._counter=0;this._amountOfCard=0;this._ace=false;this._wasDec=false;this._bmText.tint=16777215};Object.defineProperty(d.prototype,"amount",{get:function(){return this._counter},enumerable:true,configurable:true});return d}(Phaser.Sprite));a.CardCounter=b})(mygame||(mygame={}));var mygame;(function(b){var a=(function(){function c(d){this._cards=b.GameConfig.CARDS.slice(0);this._game=d;this._bots=[];this._currentCardsOnTable=[];this._highestBid=0;this._cardCounter=null}Object.defineProperty(c.prototype,"nextCommandCallback",{set:function(d){this._nextCommandCallback=d},enumerable:true,configurable:true});c.prototype.addBot=function(d){this._bots.push(d)};c.prototype.toMaxCards=function(e){var f=this;if(this._cardCounter.amount<17){var d=this.addCardOnTanle(e).onComplete.addOnce(function(){f.toMaxCards(e)})}else{this._checkWinLooseCallback()}this._cardCounter.updateText()};c.prototype.addCardOnTanle=function(p,k){var l=this;if(k===void 0){k=0}if(this._cardCounter==null){this._cardCounter=new b.CardCounter(p.game,0,55-200+10);this._cardCounter.setRectangleSize(100,50,10,0.7);this._cardCounter.setFontSize(30);p.addChild(this._cardCounter)}else{this._cardCounter.visible=true}var g;g=b.Utils.removeRandomItem(this._cards);var f;var j=0;var d=0;if(this._currentCardsOnTable.length>1){for(var h=0;h<this._currentCardsOnTable.length;h++){var m=this._currentCardsOnTable[h];d=m.x-40;p.game.add.tween(m).to({x:d},200*b.GameConfig.TIME_MULTIPLAYER,Phaser.Easing.Sinusoidal.InOut,true,k)}var e=this._currentCardsOnTable.length;f=new b.Card(p.game,d+60,-50-200+10,b.GameConfig.name2suit(g[1]),g[0],false);j=200}else{f=new b.Card(p.game,-20+60*this._currentCardsOnTable.length,-50-200+10,b.GameConfig.name2suit(g[1]),g[0],this._currentCardsOnTable.length>0)}f.x+=500;f.y+=100;var o=p.game.add.tween(f).to({x:f.x-500,y:f.y-100},b.GameConfig.CARD_FLY_TIME,Phaser.Easing.Sinusoidal.Out,true,k);o.onComplete.addOnce(function(){if(window.sounds){l._game.sound.play("new_card",0.4)}});if(this._currentCardsOnTable.length!=1){p.game.add.tween(f.scale).to({x:0.1},b.GameConfig.CARD_SCALE_TIME,Phaser.Easing.Quadratic.In,true,100+k).onComplete.addOnce(function(){f.showCard();p.game.add.tween(f.scale).to({x:1},b.GameConfig.CARD_SCALE_TIME,Phaser.Easing.Quadratic.Out,true)})}p.addChild(f);this._currentCardsOnTable.push(f);this._cardCounter.addCard(g,this._currentCardsOnTable.length!=1);return o};Object.defineProperty(c.prototype,"checkWinLoseCallback",{set:function(d){this._checkWinLooseCallback=d},enumerable:true,configurable:true});c.prototype.makeCounterGreen=function(){this._cardCounter.makeMeGreen()};c.prototype.addCardsOnTable=function(e,f){var g=this;var d;d=this.addCardOnTanle(e,0);d.onComplete.addOnce(function(){e.game.time.events.add(f,function(){g._nextCommandCallback()},g)},this)};Object.defineProperty(c.prototype,"highestBid",{get:function(){return this._highestBid},set:function(d){this._highestBid=d},enumerable:true,configurable:true});Object.defineProperty(c.prototype,"cardsOnTable",{get:function(){return this._currentCardsOnTable},enumerable:true,configurable:true});c.prototype.loadCards=function(){this._cards=b.GameConfig.CARDS.slice(0)};c.prototype.hideCards=function(){var e=this;this._cardCounter.visible=false;var d;this._currentCardsOnTable.forEach(function(f,g){d=f.discard(g*300)});d.onComplete.addOnce(function(){e.removeCards()},this)};c.prototype.myreset=function(){this._cardCounter.myreset();this._cardCounter.visible=false;this._cardCounter.alpha=1;this._currentCardsOnTable.length=0;this._cards=b.GameConfig.CARDS.slice(0)};c.prototype.revealLastCard=function(){var e=this;if(window.sounds){this._game.sound.play("choose",0.4)}var d=this._currentCardsOnTable[this._currentCardsOnTable.length-1];d.game.add.tween(d.scale).to({x:0.1},b.GameConfig.CARD_SCALE_TIME,Phaser.Easing.Quadratic.In,true).onComplete.addOnce(function(){e._cardCounter.updateText();d.showCard();d.game.add.tween(d.scale).to({x:1},b.GameConfig.CARD_SCALE_TIME,Phaser.Easing.Quadratic.Out,true)},this)};c.prototype.revealCards=function(){var f=this;var d=0;var e;this._currentCardsOnTable.forEach(function(g){e=g.reveal(d);d+=100});e.onComplete.addOnce(function(){f._nextCommandCallback()})};Object.defineProperty(c.prototype,"points",{get:function(){return this._cardCounter.amount},enumerable:true,configurable:true});c.prototype.giveCardTo=function(e){var d=e.addCards(b.Utils.removeRandomItem(this._cards));return d};c.prototype.removeCards=function(){var e=this;var d;this._currentCardsOnTable.forEach(function(g,f){d=g.game.add.tween(g).to({x:0,y:g.y-500,alpha:0},b.GameConfig.CARD_FLY_TIME+500,Phaser.Easing.Sinusoidal.Out,true,f*200);d.onStart.addOnce(function(){e._game.sound.play("new_card",0.4)},e);d.onComplete.addOnce(function(){g.destroy()},e)});this._game.add.tween(this._cardCounter).to({alpha:0},500,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){e._cardCounter.myreset();e._cardCounter.visible=false;e._cardCounter.alpha=1})};c.prototype.giveCards=function(){var f=this;var e;for(var d=0;d<this._bots.length;d++){e=this._bots[d%this._bots.length].addCards(b.Utils.removeRandomItem(this._cards))}e.onComplete.addOnce(function(){f._nextCommandCallback()},this)};return c}());b.Dealer=a})(mygame||(mygame={}));var mygame;(function(a){var b=(function(d){__extends(c,d);function c(f,e,h){var g=d.call(this,f,e,h)||this;g._startXY=new Phaser.Point(e,h);g._otherXY=new Phaser.Point(0,0);g._message="";g._pixel=g.game.add.sprite(0,0,"objects","pixel.png");g._pixel.anchor.set(0,0.5);g.addChild(g._pixel);g._leftBorder=g.game.add.sprite(0,0,"objects","left.png");g._leftBorder.anchor.set(0,0.5);g.addChild(g._leftBorder);g._rightBorder=g.game.add.sprite(0,0,"objects","left.png");g._rightBorder.anchor.set(1,0.5);g._rightBorder.scale.set(-1,1);g.addChild(g._rightBorder);g._messageBtmText=g.game.add.bitmapText(0,0,"font_all_30","Садись за кресло, чтобы присоединиться к игре.",24);g._messageBtmText.anchor.set(0,0.5);g._messageBtmText.maxWidth=a.GameConfig.HINT_INITIAL_MAX_WIDTH;g._messageBtmText.align="center";g.addChild(g._messageBtmText);g.setLandscape();g.renderBackground();return g}c.prototype.setStart=function(e,f){this._startXY.x=e;this._startXY.y=f};c.prototype.setOther=function(e,f){this._otherXY.x=e;this._otherXY.y=f};c.prototype.setLandscape=function(){this.x=this._startXY.x;this.y=this._startXY.y;this._isLandscape=true;this._renderBackground=this.renderLandscape.bind(this);this.renderBackground()};c.prototype.setPortrait=function(){this.x=this._otherXY.x;this.y=this._otherXY.y;this._isLandscape=false;this._renderBackground=this.renderPortrait.bind(this);this.renderBackground()};Object.defineProperty(c.prototype,"isLandscape",{get:function(){return this._isLandscape},enumerable:true,configurable:true});c.prototype.renderPortrait=function(){var e=1;var f=Math.max(200,this._messageBtmText.width);this._messageBtmText.x=0;this._messageBtmText.anchor.set(0.5,0.5);this._leftBorder.anchor.set(1,1);this._leftBorder.x=-f/2;this._leftBorder.y=0;this._pixel.anchor.set(0,1);this._pixel.x=-f/2;this._rightBorder.anchor.set(1,1);this._rightBorder.x=f/2;if(this._messageBtmText.height>50){e=(this._messageBtmText.height+50)/60;this._leftBorder.height=(this._messageBtmText.height+50);this._rightBorder.height=(this._messageBtmText.height+50)}else{this._leftBorder.height=60;this._rightBorder.height=60}this._pixel.scale.set(f,e);this._messageBtmText.y=-this._leftBorder.height/2};c.prototype.renderLandscape=function(){this._rightBorder.x=this._rightBorder.width;this._rightBorder.anchor.set(0,0.5);var e=1;var f=Math.max(200,this._messageBtmText.width);this._pixel.anchor.set(0,0.5);this._messageBtmText.anchor.set(0,0.5);this._messageBtmText.y=0;this._messageBtmText.x=this._rightBorder.width;this._pixel.x=this._rightBorder.width;this._leftBorder.anchor.set(0,0.5);this._leftBorder.x=this._rightBorder.width*2;this._rightBorder.x=this._pixel.x+f-this._rightBorder.width;if(this._messageBtmText.height>50){e=(this._messageBtmText.height+50)/60;this._leftBorder.height=(this._messageBtmText.height+50);this._rightBorder.height=(this._messageBtmText.height+50)}else{this._leftBorder.height=60;this._rightBorder.height=60}this._pixel.scale.set(f,e)};c.prototype.show=function(){this.alpha=1};c.prototype.hide=function(){this.alpha=0};Object.defineProperty(c.prototype,"maxWidth",{set:function(e){this._messageBtmText.maxWidth=e},enumerable:true,configurable:true});Object.defineProperty(c.prototype,"fontSize",{set:function(e){this._messageBtmText.fontSize=e},enumerable:true,configurable:true});Object.defineProperty(c.prototype,"message",{set:function(e){this._message=e;this._messageBtmText.text=this._message;this.renderBackground()},enumerable:true,configurable:true});c.prototype.renderBackground=function(){this._renderBackground()};return c}(Phaser.Sprite));a.Hint=b})(mygame||(mygame={}));var mygame;(function(b){var a=(function(d){__extends(c,d);function c(f,e,i,g){var h=d.call(this,f,e,i)||this;h._balance=g;h._numberOfChips=0;h._cardCounter=new b.CardCounter(h.game,0,100-10);h._cardCounter.setRectangleSize(100,50,10,0.7);h._cardCounter.setFontSize(30);h.addChild(h._cardCounter);h._burst=false;h._cards=[];h._cardsContainer=h.game.add.sprite(0,170+20);h._cardCounter.visible=false;h.addChild(h._cardsContainer);h._totalBid=0;return h}Object.defineProperty(c.prototype,"balance",{get:function(){return this._balance},set:function(e){this._balance=e},enumerable:true,configurable:true});c.prototype.myreset=function(){this._numberOfChips=0;this._burst=false;this._cards.length=0;this._cardCounter.myreset();this._cardCounter.visible=false;this._cardCounter.alpha=1;this._totalBid=0};Object.defineProperty(c.prototype,"burst",{get:function(){return this._burst},enumerable:true,configurable:true});c.prototype.bid=function(e){this._balance-=e;this._totalBid+=e;this._numberOfChips++};c.prototype.makeCounterGreen=function(){this._cardCounter.makeMeGreen()};Object.defineProperty(c.prototype,"currentBid",{get:function(){return this._totalBid},enumerable:true,configurable:true});c.prototype.resetBid=function(){this._totalBid=0};Object.defineProperty(c.prototype,"numberOfChips",{get:function(){return this._numberOfChips},set:function(e){this._numberOfChips=e},enumerable:true,configurable:true});c.prototype.addCards=function(s){var t=this;var l;var q=200;var n=200;if(this._cards.length>=2){for(var u=0;u<this._cards.length;u++){var g=this._cards[u];var m=-0.15+2*u*0.15;var v=this._cards.length;var p=Math.PI/25*Math.floor(v)-Math.PI;var o=(q+100)*Math.sin(-m+p);var e=q*Math.cos(-m+p);var k=7.5*this._cards.length;this.game.add.tween(g).to({x:o,angle:-k/2+7.5*u,y:e},300,Phaser.Easing.Sinusoidal.Out,true)}}var y=-0.15+2*this._cards.length*0.15;var h=Math.PI/25*Math.floor(this._cards.length)-Math.PI;var x=(q+100)*Math.sin(-y+h);var w=q*Math.cos(-y+h);this._cardCounter.addCard(s,false);if(this._cardCounter.amount>21){this._burst=true}var f=this.game.add.sprite(500,-300,"objects","back.png");this._cardsContainer.addChild(f);f.anchor.set(0.5,0.5);f.scale.set(1.2,1.2);var z=7.5*this._cards.length;this.game.add.tween(f.scale).to({x:0.1},b.GameConfig.CARD_SCALE_TIME,Phaser.Easing.Quadratic.In,true,100).onComplete.addOnce(function(){f.loadTexture("objects",s+".png");if(!t._cardCounter.visible){t._cardCounter.visible=true}t.game.add.tween(f.scale).to({x:1.25},b.GameConfig.CARD_SCALE_TIME,Phaser.Easing.Quadratic.Out,true).onComplete.addOnce(function(){if(window.sounds){t.game.sound.play("new_card",0.4)}},t)},this);if(this._cards.length>=2){var j=-z/2+7.5*(this._cards.length);l=this.game.add.tween(f).to({x:x,y:w,angle:-z/2+7.5*(this._cards.length)},b.GameConfig.CARD_FLY_TIME,Phaser.Easing.Sinusoidal.Out,true)}else{l=this.game.add.tween(f).to({x:x+this._cards.length*30,y:w,angle:-5+10*(this._cards.length)},b.GameConfig.CARD_FLY_TIME,Phaser.Easing.Sinusoidal.Out,true)}this._cards.push(f);return l};c.prototype.removeCards=function(){var f=this;var e;this._cards.forEach(function(h,g){e=f.game.add.tween(h).to({x:0,y:h.y-500,alpha:0},b.GameConfig.CARD_FLY_TIME,Phaser.Easing.Sinusoidal.Out,true,g*200);e.onStart.addOnce(function(){f.game.sound.play("new_card",0.35)},f);e.onComplete.addOnce(function(){h.destroy()},f)});this.game.add.tween(this._cardCounter).to({alpha:0},500,Phaser.Easing.Sinusoidal.InOut,true).onComplete.addOnce(function(){f._cardCounter.myreset();f._cardCounter.visible=false;f._cardCounter.alpha=1});return e};Object.defineProperty(c.prototype,"points",{get:function(){return this._cardCounter.amount},enumerable:true,configurable:true});Object.defineProperty(c.prototype,"cardsInHand",{get:function(){return this._cardCounter.cardsNumber},enumerable:true,configurable:true});return c}(Phaser.Sprite));b.Player=a})(mygame||(mygame={}));var mygame;(function(a){var b=(function(c){__extends(d,c);function d(f,e,m){var l=c.call(this,f,e,m)||this;for(var k=-5;k<6;k++){for(var g=-5;g<6;g++){var h=l.game.add.sprite(200*k,200*g,"bg");h.anchor.set(0.5);l.addChild(h)}}return l}return d}(Phaser.Sprite));a.BackGround=b})(mygame||(mygame={}));